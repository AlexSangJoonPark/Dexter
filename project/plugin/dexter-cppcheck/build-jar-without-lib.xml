<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="create_run_jar" name="Create Jar for Project dexter-cppcheck">
	<property name="version" value="0.9.0">
	</property>
	<property name="dist" location="dist"/>
	
	<property name="core-prj-path" location="../dexter-core" />
	<property name="core-bin-path" location="${core-prj-path}/${bin-name}" />
	<property name="core-lib-path" location="${core-prj-path}/lib" />
	<property name="temp" location="temp" />
	<property name="vendor" value="Samsung Electronics" />

	<target name="clean">
		<delete failonerror="false">
			<fileset dir="${dist}" />
			<fileset dir="${temp}" />
			<fileset file="../cppcheck_test/lib/dexter-cppcheck_*.jar" />
		</delete>
		
		<mkdir dir="${dist}" />
		<mkdir dir="${temp}" />
	</target>

	<target name="create_run_jar" depends="clean">
		<jar destfile="${dist}/dexter-cppcheck_${version}.jar" filesetmanifest="mergewithoutmain">
			<manifest>
				<attribute name="Class-Path" value="."/>
			</manifest>
			
			<fileset dir="${bin-name}"/>
			<!--zipfileset excludes="META_INF/*.SF" src="${temp}/dexter-core_${version}.jar" /-->
			<zipfileset excludes="META-INF/*.SF" src="lib/commons-io-2.4.jar"/>
			<zipfileset excludes="META-INF/*.SF" src="lib/gson-2.2.4.jar"/>
			<zipfileset excludes="META-INF/*.SF" src="lib/guava-16.0.1.jar"/>
			<zipfileset excludes="META-INF/*.SF" src="lib/log4j-1.2.17.jar"/>
		</jar>

		<!--copy file="${dist}/dexter-cppcheck_${version}.jar" toDir="../dexter-daemon/src/resource/plugin" overwrite="true" failonerror="false" /-->
	</target>
	
	<!--target name="create_dexter_core_jar">
			<jar destfile="${temp}/dexter-core_${version}.jar">
				<manifest>
					<attribute name="Built-By" value="${vendor}"/>
					<attribute name="Class-Path" value="." />
				</manifest>

				<fileset dir="${core-bin-path}" excludes="log4j.properties"/>

				<zipfileset excludes="META_INF/*.SF" src="${core-lib-path}/commons-codec-1.9.jar" />
				<zipfileset excludes="META_INF/*.SF" src="${core-lib-path}/commons-logging-1.2.jar" />
				<zipfileset excludes="META_INF/*.SF" src="${core-lib-path}/commons-io-2.4.jar" />
				<zipfileset excludes="META_INF/*.SF" src="${core-lib-path}/hamcrest-core-1.3.jar" />
				<zipfileset excludes="META_INF/*.SF" src="${core-lib-path}/jackson-core-asl-1.9.2.jar" />
				<zipfileset excludes="META_INF/*.SF" src="${core-lib-path}/jackson-jaxrs-1.9.2.jar" />
				<zipfileset excludes="META_INF/*.SF" src="${core-lib-path}/jackson-mapper-asl-1.9.2.jar" />
				<zipfileset excludes="META_INF/*.SF" src="${core-lib-path}/jackson-xc-1.9.2.jar" />
				<zipfileset excludes="META_INF/*.SF" src="${core-lib-path}/jersey-client-1.18.jar" />
				<zipfileset excludes="META_INF/*.SF" src="${core-lib-path}/jersey-core-1.18.jar" />
				<zipfileset excludes="META_INF/*.SF" src="${core-lib-path}/jersey-json-1.18.jar" />
				<zipfileset excludes="META_INF/*.SF" src="${core-lib-path}/slf4j-api-1.6.6.jar" />
				<zipfileset excludes="META_INF/*.SF" src="${core-lib-path}/slf4j-log4j12-1.6.6.jar" />
				<zipfileset includes="**/*.class" src="${core-lib-path}/jspf/jspf.core-1.0.2.jar" />
				<zipfileset includes="**/*.class" src="${core-lib-path}/jspf/jspf.remote-1.0.2.jar" />
				<zipfileset includes="**/*.class" src="${core-lib-path}/jspf/jspf.remote.discovery-1.0.2.jar" />
				<zipfileset includes="**/*.class" src="${core-lib-path}/jspf/jspf.remote.ermi-1.0.2.jar" />
				<zipfileset includes="**/*.class" src="${core-lib-path}/jspf/jspf.remote.javascript-1.0.2.jar" />
				<zipfileset includes="**/*.class" src="${core-lib-path}/jspf/jspf.remote.lipermi-1.0.2.jar" />
				<zipfileset includes="**/*.class" src="${core-lib-path}/jspf/jspf.remote.xmlrpc-1.0.2.jar" />
				<zipfileset includes="**/*.class" src="${core-lib-path}/jspf/jspf.remote.xmlrpcdelight-1.0.2.jar" />
			</jar>
		</target-->
</project>

